{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saman/OneDrive/Desktop/OnlineStore/dashboard/src/app/dashboard/products/page.js"],"sourcesContent":["'use client';\r\nimport { useEffect, useState } from 'react';\r\nimport Link from 'next/link';\r\n\r\nexport default function ProductsPage() {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const response = await fetch('/api/products', {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        cache: 'no-store'\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      \r\n      if (!data.success) {\r\n        throw new Error(data.error || 'Failed to load products');\r\n      }\r\n\r\n      setProducts(data.data);\r\n    } catch (err) {\r\n      console.error('Fetch error:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"p-4 bg-red-100 border-l-4 border-red-500 text-red-700 rounded\">\r\n        <p>{error}</p>\r\n        <button\r\n          onClick={fetchProducts}\r\n          className=\"mt-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700\"\r\n        >\r\n          Retry\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h1 className=\"text-2xl font-bold\">Products</h1>\r\n        <div className=\"flex gap-4\">\r\n          <button\r\n            onClick={fetchProducts}\r\n            className=\"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50\"\r\n          >\r\n            Refresh\r\n          </button>\r\n          <Link\r\n            href=\"/dashboard/products/add\"\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n          >\r\n            Add Product\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      {products.length === 0 ? (\r\n        <div className=\"bg-gray-100 p-8 text-center rounded-lg\">\r\n          <p>No products found</p>\r\n          <Link\r\n            href=\"/dashboard/products/add\"\r\n            className=\"mt-4 inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n          >\r\n            Add Product\r\n          </Link>\r\n        </div>\r\n      ) : (\r\n        <div className=\"overflow-x-auto bg-white rounded-lg shadow\">\r\n          <table className=\"min-w-full divide-y divide-gray-200\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Name</th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Price</th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Stock</th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-200\">\r\n              {products.map(product => (\r\n                <tr key={product._id}>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <div className=\"flex items-center\">\r\n                      <div className=\"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 overflow-hidden\">\r\n                        {product.imageUrl && (\r\n                          <img \r\n                            src={product.imageUrl} \r\n                            alt={product.name}\r\n                            className=\"h-full w-full object-cover\"\r\n                            onError={(e) => e.target.src = '/placeholder-product.jpg'}\r\n                          />\r\n                        )}\r\n                      </div>\r\n                      <div className=\"ml-4\">\r\n                        <div className=\"text-sm font-medium text-gray-900\">{product.name}</div>\r\n                        <div className=\"text-sm text-gray-500\">{product.categories?.join(', ')}</div>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                    ${product.price?.toFixed(2)}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\r\n                      product.stock > 10 ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'\r\n                    }`}>\r\n                      {product.stock} in stock\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                    <Link\r\n                      href={`/dashboard/products/edit/${product._id}`}\r\n                      className=\"text-blue-600 hover:text-blue-900 mr-4\"\r\n                    >\r\n                      Edit\r\n                    </Link>\r\n                    <button className=\"text-red-600 hover:text-red-900\">\r\n                      Delete\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}