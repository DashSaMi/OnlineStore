{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saman/OneDrive/Desktop/OnlineStore/dashboard/src/app/dashboard/actions.js"],"sourcesContent":["// src/app/dashboard/actions.js\r\n'use server';\r\n\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\r\n\r\nexport async function fetchOrdersServer() {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/admin/orders`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': `Bearer ${process.env.ADMIN_SECRET}`\r\n      },\r\n      cache: 'no-store'\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    // Ensure we always return an array\r\n    if (Array.isArray(data.data)) {\r\n      return data.data;\r\n    } else if (Array.isArray(data.orders)) {\r\n      return data.orders;\r\n    } else {\r\n      return [];\r\n    }\r\n  } catch (error) {\r\n    console.error('Failed to fetch orders:', error);\r\n    throw new Error(error.message || 'Could not load orders data');\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;;;;AAG/B,MAAM,eAAe,QAAQ,GAAG,CAAC,wBAAwB;AAElD,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,iBAAiB,CAAC,EAAE;YAC/D,QAAQ;YACR,SAAS;gBACP,iBAAiB,CAAC,OAAO,EAAE,QAAQ,GAAG,CAAC,YAAY,EAAE;YACvD;YACA,OAAO;QACT;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,YAAY,MAAM,SAAS,IAAI;YACrC,MAAM,IAAI,MAAM,UAAU,OAAO,IAAI,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;QAC/E;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,mCAAmC;QACnC,IAAI,MAAM,OAAO,CAAC,KAAK,IAAI,GAAG;YAC5B,OAAO,KAAK,IAAI;QAClB,OAAO,IAAI,MAAM,OAAO,CAAC,KAAK,MAAM,GAAG;YACrC,OAAO,KAAK,MAAM;QACpB,OAAO;YACL,OAAO,EAAE;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACnC;AACF;;;IA5BsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saman/OneDrive/Desktop/OnlineStore/dashboard/.next-internal/server/app/dashboard/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {fetchOrdersServer as '008359a29d176b09276ec8237008a8d0636a59e747'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saman/OneDrive/Desktop/OnlineStore/dashboard/src/app/dashboard/components/SalesChart.js/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/dashboard/components/SalesChart.js <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/dashboard/components/SalesChart.js <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,6OAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA8S,GAC3U,4EACA","debugId":null}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saman/OneDrive/Desktop/OnlineStore/dashboard/src/app/dashboard/components/SalesChart.js/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/dashboard/components/SalesChart.js from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/dashboard/components/SalesChart.js\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,6OAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA0R,GACvT,wDACA","debugId":null}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saman/OneDrive/Desktop/OnlineStore/dashboard/src/app/dashboard/page.js"],"sourcesContent":["// src/app/dashboard/page.js\r\nimport { fetchOrdersServer } from './actions';\r\nimport SalesChart from './components/SalesChart';\r\n\r\nfunction getSummary(orders) {\r\n  let totalSales = 0;\r\n  let totalOrders = orders.length;\r\n  let salesByDate = {};\r\n  let ordersByDate = {};\r\n  orders.forEach(order => {\r\n    const date = new Date(order.createdAt).toLocaleDateString();\r\n    totalSales += order.total || 0;\r\n    salesByDate[date] = (salesByDate[date] || 0) + (order.total || 0);\r\n    ordersByDate[date] = (ordersByDate[date] || 0) + 1;\r\n  });\r\n  const salesData = Object.entries(ordersByDate).map(([date, count]) => ({ date, total: count }));\r\n  return { totalSales, totalOrders, salesData };\r\n}\r\n\r\nexport default async function DashboardPage() {\r\n  try {\r\n    const orders = await fetchOrdersServer();\r\n    if (!Array.isArray(orders)) {\r\n      return (\r\n        <div className=\"p-4 text-red-600\">\r\n          Error: Orders data is not an array.<br />\r\n          <span className=\"text-gray-700 text-sm\">Check your API response at <code>/api/admin/orders</code> and ensure it returns an array. Debug info: <pre>{JSON.stringify(orders, null, 2)}</pre></span>\r\n        </div>\r\n      );\r\n    }\r\n    const { totalSales, totalOrders, salesData } = getSummary(orders);\r\n    return (\r\n      <div className=\"py-6 space-y-8\">\r\n        <h1 className=\"text-3xl font-bold mb-6 text-gray-900\">Dashboard Overview</h1>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n          <div className=\"bg-white shadow rounded-lg p-6 flex flex-col items-center\">\r\n            <span className=\"text-gray-500 text-sm\">Total Orders</span>\r\n            <span className=\"text-2xl font-bold text-blue-700 mt-2\">{totalOrders}</span>\r\n          </div>\r\n          <div className=\"bg-white shadow rounded-lg p-6 flex flex-col items-center\">\r\n            <span className=\"text-gray-500 text-sm\">Total Sales</span>\r\n            <span className=\"text-2xl font-bold text-green-700 mt-2\">${totalSales.toLocaleString()}</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-white shadow rounded-lg p-6\">\r\n          <h2 className=\"text-lg font-semibold mb-4 text-gray-800\">Sales Over Time</h2>\r\n          <SalesChart data={salesData} />\r\n        </div>\r\n      </div>\r\n    );\r\n  } catch (error) {\r\n    return (\r\n      <div className=\"p-4 text-red-600\">\r\n        Error: {error.message}\r\n        <div className=\"mt-2 text-sm text-gray-600\">\r\n          Check your server logs and ensure ADMIN_SECRET is set correctly in both apps.\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}"],"names":[],"mappings":"AAAA,4BAA4B;;;;;AAC5B;AACA;;;;AAEA,SAAS,WAAW,MAAM;IACxB,IAAI,aAAa;IACjB,IAAI,cAAc,OAAO,MAAM;IAC/B,IAAI,cAAc,CAAC;IACnB,IAAI,eAAe,CAAC;IACpB,OAAO,OAAO,CAAC,CAAA;QACb,MAAM,OAAO,IAAI,KAAK,MAAM,SAAS,EAAE,kBAAkB;QACzD,cAAc,MAAM,KAAK,IAAI;QAC7B,WAAW,CAAC,KAAK,GAAG,CAAC,WAAW,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,IAAI,CAAC;QAChE,YAAY,CAAC,KAAK,GAAG,CAAC,YAAY,CAAC,KAAK,IAAI,CAAC,IAAI;IACnD;IACA,MAAM,YAAY,OAAO,OAAO,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC,MAAM,MAAM,GAAK,CAAC;YAAE;YAAM,OAAO;QAAM,CAAC;IAC7F,OAAO;QAAE;QAAY;QAAa;IAAU;AAC9C;AAEe,eAAe;IAC5B,IAAI;QACF,MAAM,SAAS,MAAM,CAAA,GAAA,kIAAA,CAAA,oBAAiB,AAAD;QACrC,IAAI,CAAC,MAAM,OAAO,CAAC,SAAS;YAC1B,qBACE,8OAAC;gBAAI,WAAU;;oBAAmB;kCACG,8OAAC;;;;;kCACpC,8OAAC;wBAAK,WAAU;;4BAAwB;0CAA2B,8OAAC;0CAAK;;;;;;4BAAwB;0CAA6C,8OAAC;0CAAK,KAAK,SAAS,CAAC,QAAQ,MAAM;;;;;;;;;;;;;;;;;;QAGvL;QACA,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,SAAS,EAAE,GAAG,WAAW;QAC1D,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAwC;;;;;;8BACtD,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAK,WAAU;8CAAwB;;;;;;8CACxC,8OAAC;oCAAK,WAAU;8CAAyC;;;;;;;;;;;;sCAE3D,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAK,WAAU;8CAAwB;;;;;;8CACxC,8OAAC;oCAAK,WAAU;;wCAAyC;wCAAE,WAAW,cAAc;;;;;;;;;;;;;;;;;;;8BAGxF,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAA2C;;;;;;sCACzD,8OAAC,mJAAA,CAAA,UAAU;4BAAC,MAAM;;;;;;;;;;;;;;;;;;IAI1B,EAAE,OAAO,OAAO;QACd,qBACE,8OAAC;YAAI,WAAU;;gBAAmB;gBACxB,MAAM,OAAO;8BACrB,8OAAC;oBAAI,WAAU;8BAA6B;;;;;;;;;;;;IAKlD;AACF","debugId":null}}]
}