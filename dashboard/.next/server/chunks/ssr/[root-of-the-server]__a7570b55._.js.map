{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saman/OneDrive/Desktop/OnlineStore/dashboard/src/lib/api/products.js"],"sourcesContent":["// lib/api/products.js\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:3000';\r\n\r\nasync function makeRequest(endpoint, method = 'GET', body = null) {\r\n  const headers = {\r\n    'Content-Type': 'application/json',\r\n  };\r\n\r\n  // Try to get auth token from wherever you store it\r\n  try {\r\n    const token = localStorage.getItem('authToken') || sessionStorage.getItem('authToken');\r\n    if (token) {\r\n      headers['Authorization'] = `Bearer ${token}`;\r\n    }\r\n  } catch (error) {\r\n    console.log('No auth token available');\r\n  }\r\n\r\n  const config = {\r\n    method,\r\n    headers,\r\n    credentials: 'include',\r\n  };\r\n\r\n  if (body) {\r\n    config.body = JSON.stringify(body);\r\n  }\r\n\r\n  const response = await fetch(`${API_BASE_URL}${endpoint}`, config);\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || `Request failed with status ${response.status}`);\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchProducts() {\r\n  return makeRequest('/api/products');\r\n}\r\n\r\nexport async function fetchProduct(id) {\r\n  return makeRequest(`/api/products/${id}`);\r\n}\r\n\r\nexport async function createProduct(productData) {\r\n  return makeRequest('/api/products', 'POST', productData);\r\n}\r\n\r\nexport async function updateProduct(id, productData) {\r\n  return makeRequest(`/api/products/${id}`, 'PUT', productData);\r\n}\r\n\r\nexport async function deleteProduct(id) {\r\n  return makeRequest(`/api/products/${id}`, 'DELETE');\r\n}"],"names":[],"mappings":"AAAA,sBAAsB;;;;;;;;AACtB,MAAM,eAAe,6DAAwC;AAE7D,eAAe,YAAY,QAAQ,EAAE,SAAS,KAAK,EAAE,OAAO,IAAI;IAC9D,MAAM,UAAU;QACd,gBAAgB;IAClB;IAEA,mDAAmD;IACnD,IAAI;QACF,MAAM,QAAQ,aAAa,OAAO,CAAC,gBAAgB,eAAe,OAAO,CAAC;QAC1E,IAAI,OAAO;YACT,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;QAC9C;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,GAAG,CAAC;IACd;IAEA,MAAM,SAAS;QACb;QACA;QACA,aAAa;IACf;IAEA,IAAI,MAAM;QACR,OAAO,IAAI,GAAG,KAAK,SAAS,CAAC;IAC/B;IAEA,MAAM,WAAW,MAAM,MAAM,GAAG,eAAe,UAAU,EAAE;IAE3D,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACvD,MAAM,IAAI,MAAM,UAAU,OAAO,IAAI,CAAC,2BAA2B,EAAE,SAAS,MAAM,EAAE;IACtF;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe;IACpB,OAAO,YAAY;AACrB;AAEO,eAAe,aAAa,EAAE;IACnC,OAAO,YAAY,CAAC,cAAc,EAAE,IAAI;AAC1C;AAEO,eAAe,cAAc,WAAW;IAC7C,OAAO,YAAY,iBAAiB,QAAQ;AAC9C;AAEO,eAAe,cAAc,EAAE,EAAE,WAAW;IACjD,OAAO,YAAY,CAAC,cAAc,EAAE,IAAI,EAAE,OAAO;AACnD;AAEO,eAAe,cAAc,EAAE;IACpC,OAAO,YAAY,CAAC,cAAc,EAAE,IAAI,EAAE;AAC5C","debugId":null}},
    {"offset": {"line": 93, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saman/OneDrive/Desktop/OnlineStore/dashboard/src/app/dashboard/products/page.js"],"sourcesContent":["'use client';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\nimport { fetchProducts } from '@/lib/api/products';\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport default function ProductsPage() {\r\n  const router = useRouter();\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const loadProducts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const response = await fetchProducts();\r\n      \r\n      // Handle different response formats\r\n      if (Array.isArray(response)) {\r\n        setProducts(response);\r\n      } else if (response.data) {\r\n        setProducts(response.data);\r\n      } else if (response.products) {\r\n        setProducts(response.products);\r\n      } else {\r\n        throw new Error('Invalid response format');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error loading products:', err);\r\n      setError(err.message || 'Failed to load products. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadProducts();\r\n  }, []);\r\n\r\n  const handleDelete = async (productId) => {\r\n    if (!confirm('Are you sure you want to delete this product?')) return;\r\n    \r\n    try {\r\n      setLoading(true);\r\n      // Implement your deleteProduct API call here\r\n      // await deleteProduct(productId);\r\n      await loadProducts(); // Refresh the list after deletion\r\n    } catch (err) {\r\n      setError(err.message || 'Failed to delete product');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-6 flex justify-center items-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\r\n        <span className=\"ml-3\">Loading products...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded\">\r\n          <p className=\"font-medium\">Error loading products</p>\r\n          <p className=\"mt-1\">{error}</p>\r\n          <button\r\n            onClick={loadProducts}\r\n            className=\"mt-3 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors\"\r\n          >\r\n            Retry\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h1 className=\"text-2xl font-bold text-gray-800\">Products Management</h1>\r\n        <div className=\"flex space-x-4\">\r\n          <button\r\n            onClick={loadProducts}\r\n            className=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors flex items-center\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-gray-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                </svg>\r\n                Refreshing...\r\n              </>\r\n            ) : 'Refresh'}\r\n          </button>\r\n          <Link\r\n            href=\"/dashboard/products/add\"\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center\"\r\n          >\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-1\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n              <path fillRule=\"evenodd\" d=\"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\" clipRule=\"evenodd\" />\r\n            </svg>\r\n            Add Product\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      {products.length === 0 ? (\r\n        <div className=\"bg-white rounded-lg shadow p-6 text-center\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-12 w-12 mx-auto text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\" />\r\n          </svg>\r\n          <h3 className=\"mt-2 text-lg font-medium text-gray-900\">No products found</h3>\r\n          <p className=\"mt-1 text-sm text-gray-500\">Get started by adding a new product.</p>\r\n          <div className=\"mt-6\">\r\n            <Link\r\n              href=\"/dashboard/products/add\"\r\n              className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n            >\r\n              Add Product\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full divide-y divide-gray-200\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Product</th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Price</th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Stock</th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {products.map((product) => (\r\n                  <tr key={product._id || product.id} className=\"hover:bg-gray-50\">\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div className=\"flex items-center\">\r\n                        <div className=\"flex-shrink-0 h-10 w-10\">\r\n                          <img \r\n                            className=\"h-10 w-10 rounded-md object-cover\" \r\n                            src={product.imageUrl || '/placeholder-product.jpg'} \r\n                            alt={product.name} \r\n                            onError={(e) => {\r\n                              e.target.src = '/placeholder-product.jpg';\r\n                            }}\r\n                          />\r\n                        </div>\r\n                        <div className=\"ml-4\">\r\n                          <div className=\"text-sm font-medium text-gray-900\">{product.name}</div>\r\n                          <div className=\"text-sm text-gray-500\">\r\n                            {product.categories?.join(', ') || 'Uncategorized'}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                      ${product.price?.toFixed(2) || '0.00'}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\r\n                        product.stock > 10 ? 'bg-green-100 text-green-800' : \r\n                        product.stock > 0 ? 'bg-yellow-100 text-yellow-800' : \r\n                        'bg-red-100 text-red-800'\r\n                      }`}>\r\n                        {product.stock || 0} in stock\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                      {product.isActive !== false ? 'Active' : 'Inactive'}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                      <button\r\n                        onClick={() => router.push(`/dashboard/products/edit/${product._id || product.id}`)}\r\n                        className=\"text-blue-600 hover:text-blue-900 mr-4\"\r\n                      >\r\n                        Edit\r\n                      </button>\r\n                      <button \r\n                        onClick={() => handleDelete(product._id || product.id)}\r\n                        className=\"text-red-600 hover:text-red-900\"\r\n                        disabled={loading}\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}